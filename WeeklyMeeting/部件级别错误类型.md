A.部件级别错误类型

错误类型 	| 错误类型解释 	| 错误编号 	     |  典型汉字 	             |        
-----------|-------------------|---------------|--------------------------|
水平平齐 	| 人字底部水平 	| A0001 	| 人 八 六（末笔）           |    
中点切分    | 切分成左右对称       | A0002 	| 中 十（末笔）            | 
黄金分割 	| 落笔处符合黄金比例   | A0003 	       | 下（末笔）匕（首笔）     | 
首点居正 	| 主的首点居于中心线   | A0004 	       | 主（首笔）文（首笔）     |
竖直等分 	| 三 王 竖直方向等分   | A0005 		| 三 王（末笔）目（末两笔）| 
水平等分  	| 山 开 水平方向等分   | A0006  	| 山（末两笔）开（末笔）   | 
重心平稳 	| 火字交叉点在字中间   | A0007 		| 火 大（末笔）	  | 
竖直平齐    | 卡字上下部分对齐     | A0008  	| 片（末笔）已（末笔）   | 
突出主笔 	| 主笔横竖阈值更紧     | A0009 		| 干 旦（末笔）	  | 
长度比例    | 二字两笔间长度       | A0010         | 二（末笔）川（末两笔）   | 

B.笔画级别错误类型定义

错误类型   |  错误类型解释      |  错误编号       |  返回值 
----------|------------------|----------------|------------
笔画写错   | 笔画写成其他笔画   | B0001 	      | B0001 
笔画位置错误| 笔画的位置发生错误 |  B0002          | B0002  

C.汉字级别错误类型定义

错误类型    |  错误类型解释      |  错误编号       |  返回值 
-----------|----------------  |----------------|------------
宽高比      |长和宽的比值        |  C0001 	 |  C0001
整字太小    |在田字格中的面积太小 | C0002 	     |  C0002
整字太偏    |在田字格中的位置太偏 | C0003 	     |  C0003
...        |...               | ...            |  ...
------------------------------------------------------------------------------------------------------------------
D.返回值类型

采用如下方式：(1.错误最多只输出一种；2.由于动画需要正确位置标注，添加location字段)

	{
	    "ret":"101",
	    "error": [
		{
		  "errortype": "A0001",
		  "errorstroke": {"0":"0.2", "1":"0.3"}
		  "location":{"0":"1", "1":"1"}}
	  ]
	}

评判内容在每一笔完成之后返回。每次返回的内容包含该笔画的错误，或者一个部件完成之后的部件正确性，或者整字完成之后的整字正确性。

1.ret 字串. 一共有3位，每一位对应关系如下： 0 表示错误 ，1 表示正确

- 第一位 表示该笔画是否正确

	其中可能产生笔画错误，或者笔画位置错误，两种错误类型
	
- 第二位 表示该笔画完成之后部件是否正确，如果部件未完成,默认为1正确

	如果第二位出现0，则会产生部件的错误，部件的错误类型如上定义
	
- 第三位 表示该笔画完成，整个汉字正确，默认如果整个汉字未完成，默认为1正确，

2.error数组. 包含错误列表，每种错误中包含 `errortype` , `errorstroke` , `location`三种错误信息。在未来，如果包含更多错误则继续在error中添加错误列表项。 

举例：

例子1：

	{
	    "ret":"111",
	    "error": []
	}

该笔画没有错误，并且部件没有错误,整字没有错误

例子2：

	{
		"ret":"011",
		"error":[
			{
				"errortype": "B0001",
				"errorstroke":{"null":null}
			}
		]
	}

该笔画发生错误，该笔画的错误类型为 B0001，为该笔画写错。如果 B0002 则表示为笔画位置出现错误。

例子3：

	{
	    "ret":"101",
	    "error": [
		{
		  "errortype": "A0001",
		  "errorstroke": {"0":"0.2", "1":"0.3"}
		}
	  ]
	}

该笔画没有错误，但是部件发生错误，错误类型为 A0001。错误具体笔画保存在 errorstroke 中。

例子4：

	{
		"ret":"110",
		"error": [
		{
			"errortype": "C0001",
			"errorstroke": {"null":null }
		}
		]
	}

整字出现错误，该返回值只可能在整个汉字写完之后出现，返回该汉字的错误类型为 C0001，表示汉字比例发生错误。

例子5：

	{
		"ret":"101",
		"error": [
		{
			"errortype": "A0010",
			"errorstroke": {"0":"0.2/1", "1":"0.3/1"}
		}
		]
	}
部件出现错误，类型是“长度比例”。由于一个点不够显示，所以显示该笔画的起始点和末点比例。

例子6：

	{
		"ret":"101",
		"error": [
		{
			"errortype": "A0006",
			"errorstroke": {"1":"0.04/0.46/0.5/1"}
		}
		]
	}
部件出现错误，类型是“水平等分”，当错误点均在同一笔画上时（如“开”），以“笔画”：“笔画上所有等分点在该笔画上的比例，用/间隔”这种方式呈现。

例子7：

	{
		"ret":"101",
		"error": [
		{
			"errortype": "A0006",
			"errorstroke": {"0":"0.5","1":"0.48","2":"0.46"}
		}
		]
	}
部件出现错误，类型是“水平等分”，当错误点不在同一笔画上时（如“川”），以这种方式呈现。

----------------------------------------------------------------------------------------------------------------
E.评判函数汇总：

1.水平平齐（A0001）

    function IsShuiPingPingQi(BHtable,turingtable)
    --BHtable存储了所有需要评判的笔画(注意：表中的笔画不能重复)，turingtable表示各个笔画的拐点序号，起点为0，第一个拐点为1.
    
    返回值举例：{"error":[{"errordiff":0.30596,"errorstroke":{"0":"1/","1":"1/"},"errortype":"A0001"}],"ret":"101"}

2：中点切分（A0002）
    
    function IsZhongDianQieFen(bh1, bd1idx, bh2, bd2idx)--中点切分 字例：主
    --中点切分的评判思路：--笔画bh1的第bd1idx笔段，被笔画bh2的第bd2idx笔段切分为相等的两段。笔段索引号从0开始。
    --切分形式可以是，相交或相接。

3：黄金分割（A0003）

    function IsGoldenSection(bd1,bd2,type1,type2)--黄金分割 字例：下
    --黄金分割用于点和线之间，参数bd1和bd2必须是笔画，不能是笔段（bd1是被切割为两段的；bd2是用于提供切割点的；type1为0代表首点，为1代表末点, 为2代表交点）
    --type2用于说明谁占0.618，0表示起端部分占0.618，1表示末端部分占0.618

4：首点居正（A0004）

    function	IsShouDianJuZheng(bh1,bh2,bh2bdidx)--首点居正 字例：文 市
    ------首点居正的评判思路：bh1的尾点和bh2中笔段bh2bdidx的中点是竖直对齐的，即x坐标相等。
    ------要求：变量bh1和bh2是笔画；bh1是“点“笔画；bh2bhidx是bh2上面的笔段索引。


5：竖直等分（A0005）

    function IsShuZhiDengFen(HengBHtable, bdtable)
    ----竖直等分的评判思路：HengBHtable存储了各个笔画(注意：表中的笔画不能重复)，bdtable存储了各个笔画上的笔段索引
    --要求：各个笔段的中点在水平方向上是等间隔的。

6：水平等分（A0006）

    function IsShuiPingDengFen(ShuBHtable,bdtable)--水平等分 字例：山
    --水平等分的评判思路：ShuBHtable存储了各个笔画(注意：表中的笔画不能重复)，bdtable存储了各个笔画上的笔段索引
    --要求：各个笔段的中点在水平方向上是等间隔的。

7：重心平稳（A0007）

    function IsZhongXinPingWen(bh1,bh2)--重心平稳 字例：火
    -----重心平稳评判思路：bh1和bh2是两个笔画(不是笔段)，它们应该相交或相接。将它们的交点或接点作为重心。
    -----如果相接的话，bh1应该被bh2的首点分为两段.


8竖直平齐（A0008）

    function IsShuZhiPingQi(BHtable,turingtable)
    --竖直平齐的评判思路：判断各个点是否在一条竖直线上
    --BHtable表示所有笔画(注意：表中的笔画不能重复)，turingtable表示各个笔画的拐点序号，起点为0，第一个拐点为1......

9：突出主笔（A0009）

    function	IsTuChuZhuBi(heng,shu)--突出主笔 字例：下 士
    -----突出主笔评判思路：主笔应该是一个部件中最长的横笔或竖笔。
    -----参数heng，shu是笔画，不是笔段。它们的取值可以为nil

10：长度比例（A0010）

    function IsChangDuBiLi(bh1,bh1_bdindex,bh2,bh2_bdindex,ratio)--长度比例
    --长度比例评判思路：bh1的指定笔段/bh2的指定笔段>=ratio。  注意：笔段索引号从0开始。bh1和bh2不相同。

----------------------------------------------------------------------------------------------------------------



## Lua encode JSON

可选择如下：

- http://www.kyne.com.au/~mark/software/lua-cjson.php
- http://regex.info/blog/lua/json
- 更多选择： <http://lua-users.org/wiki/JsonModules>

cjson 配置：http://www.himigame.com/lua-game/1337.html

## C++ decode JSON

- jsoncpp <https://github.com/open-source-parsers/jsoncpp>
- rapidjson <https://github.com/miloyip/rapidjson>
- boost
- http://blog.csdn.net/hzyong_c/article/details/7163589
